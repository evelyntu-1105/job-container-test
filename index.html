<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>工作設計型態測驗</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { color: #857672; background-color: #f5f5f5; }
        .option-bg { background-color: #B3A7A7; }
        .option-btn:hover { border-color: #9AB992; background-color: #FDFDFB; }
        .btn-primary { background-color: #D3DB9A; color: #FFFFFF; transition: all 0.3s ease; }
        .btn-primary:hover { background-color: #9AB992; transform: translateY(-1px); }
        /* 增加開始按鈕的左右內距 */
        .btn-start-wide { padding-left: 3rem; padding-right: 3rem; }
        .text-custom-title { color: #B4A8A6; }
        .text-progress { color: #9AB992; }
        .bg-custom-progress { background-color: #D3DB9A; }
        .pre-line { white-space: pre-line; }
        .hidden { display: none; }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center p-4 md:p-8">

    <div id="progress-container" class="w-full max-w-2xl mb-8 hidden">
        <div class="flex justify-between mb-2 text-sm font-medium tracking-wide">
            <span id="progress-text" class="text-progress">第 1 / 15 題</span>
            <span id="progress-percent" class="text-progress">0%</span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-1.5">
            <div id="progress-bar" class="bg-custom-progress h-1.5 rounded-full transition-all duration-500" style="width: 0%"></div>
        </div>
    </div>

    <main class="w-full max-w-2xl bg-white rounded-3xl shadow-sm p-8 md:p-12">
        
        <div id="start-screen" class="text-center md:text-left">
            <h1 class="text-3xl font-bold mb-8 leading-tight">工作設計型態測驗：<br>你知道你的工作其實是個怎樣的「容器」嗎？</h1>
            <div class="text-lg mb-10 space-y-6 leading-relaxed opacity-90">
                <p>這個測驗是在幫我們看清一件事：我們現在待的工作，在組織裡是怎麼被設計的？</p>
                <p>思考「我是不是不夠好」的時間裡，也了解「這個工作是用什麼邏輯在運作」。</p>
            </div>
            <button onclick="startQuiz()" class="btn-primary btn-start-wide w-auto mx-auto md:mx-0 py-5 rounded-2xl text-xl font-bold shadow-sm block">
                開始了解我的工作是什麼樣的容器
            </button>
        </div>

        <div id="quiz-screen" class="hidden">
            <h2 id="question-group" class="text-custom-title font-bold mb-3 text-lg tracking-widest uppercase"></h2>
            <h3 id="question-text" class="text-2xl font-bold mb-10 leading-snug"></h3>
            <div id="options-container" class="space-y-4"></div>
            <button onclick="prevQuestion()" id="prev-btn" class="mt-10 flex items-center gap-2 font-medium opacity-60 hover:opacity-100 transition">
                ← 回上一題
            </button>
        </div>

        <div id="result-screen" class="hidden text-center">
            <div class="flex justify-center mb-6">
                <span id="result-tag" class="px-4 py-1 rounded-full text-xs font-bold text-white tracking-widest"></span>
            </div>
            <h2 id="result-title" class="text-4xl font-black mb-8"></h2>
            
            <div class="space-y-6 mb-12">
                <div class="flex justify-center mb-6">
                    <img id="result-image" src="" alt="容器插圖" class="w-48 h-auto object-contain rounded-xl">
                </div>

                <div class="text-left px-2">
                    <h4 class="font-bold mb-3 text-lg" style="color: #857672;">角色介紹</h4>
                    <p id="result-intro" class="text-base leading-relaxed pre-line opacity-90 text-[#857672]"></p>
                </div>

                <div class="text-left p-6 rounded-2xl bg-gray-50/50 border border-gray-100">
                    <h4 class="font-bold mb-3 text-lg" style="color: #857672;">人格與心態轉向建議</h4>
                    <p id="personality-advice" class="text-base leading-relaxed pre-line opacity-90 text-[#857672]"></p>
                </div>
            </div>

            <div class="text-left p-8 rounded-3xl border-2 mb-8" style="background-color: #FDFDFB; border-color: #D3DB9A;">
                <h4 class="font-bold mb-4 text-lg">這份工作的樣態推論</h4>
                <div id="diagnosis-content" class="text-base leading-relaxed pre-line opacity-80 mb-6 text-[#857672]"></div>
                <hr class="border-[#D3DB9A]/30 my-6">
                <h4 class="font-bold mb-4 text-lg">給你的提醒</h4>
                <p id="result-bottomNote" class="text-base leading-relaxed pre-line opacity-80"></p>
            </div>

            <div class="text-xs italic mb-10 leading-loose text-[#B4A8A6] text-left border-t border-gray-50 pt-8">
                <p>「這不是標籤，也不是評價。它只是告訴你：你現在待的是哪一種『被設計好的工作容器』。」</p>
                <p class="mt-4 pre-line">若是感到消耗，通常是你對工作的期待與所待的容器不匹配...</p>
            </div>
            
            <button onclick="showFeedback()" class="btn-primary w-full py-5 rounded-2xl text-lg font-bold mt-12">
                下一步：分享你的感想
            </button>
        </div>

        </main>

    <script>
        // 確保 Google Drive 圖片連結可以正確轉換為直連
        const getDirectLink = (url) => url.replace('file/d/', 'uc?export=view&id=').replace('/view?usp=drivesdk', '');

        const imageUrls = {
            type1: getDirectLink("https://drive.google.com/file/d/1jo8RwteNzbkQZkX_9n1MCW-UFSyU1YUD/view?usp=drivesdk"),
            type2: getDirectLink("https://drive.google.com/file/d/1xLQOuUF6g4QkDoqYpx0RZRWdZ5RsqJXX/view?usp=drivesdk"),
            type3: getDirectLink("https://drive.google.com/file/d/1ZiEg44yIGwgTEgYqURfMNOJ_Mi8eU1Q5/view?usp=drivesdk"),
            type4: getDirectLink("https://drive.google.com/file/d/1uHBv2rluRt0zZw0FvhYOYS7pEQ0eC1jF/view?usp=drivesdk"),
            type5: getDirectLink("https://drive.google.com/file/d/10rw15O8eL9ZZCy2rKGylz-JILrgmQcZD/view?usp=drivesdk")
        };

        const quizData = [ /* 15題資料與前版一致 */ ];
        const resultCards = { /* 5種結果與前版一致 */ };

        let currentStep = 0;
        let userAnswers = [];

        function startQuiz() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            document.getElementById('progress-container').classList.remove('hidden');
            renderQuestion();
        }

        // ... renderQuestion, selectOption 等邏輯 ...

        function showResults() {
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');

            // --- 此處假設 resultObj 已計算完成 ---
            // 動態更換圖片與文字
            document.getElementById('result-image').src = imageUrls[resultObj.id];
            document.getElementById('result-intro').innerText = resultObj.intro;
            document.getElementById('personality-advice').innerText = resultObj.advice;
            document.getElementById('result-bottomNote').innerText = resultObj.bottomNote;
            // ... 其他渲染 ...
            window.scrollTo(0, 0);
        }

        function resetToHome() {
            userAnswers = [];
            currentStep = 0;
            document.getElementById('final-screen').classList.add('hidden');
            document.getElementById('start-screen').classList.remove('hidden');
            window.scrollTo(0, 0);
        }
    </script>
</body>
</html>
